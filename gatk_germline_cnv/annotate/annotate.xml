<tool id="gatk_cnv_annotator" name="GATK CNV Annotator" version="1.1.1">

	<description>annotates a CNV vcf generated by GATK.</description>

	<requirements>
		<requirement type="package" version="3.6.2">r-base</requirement>
		<requirement type="package" version="1.2.1">r-tidyverse</requirement>
		<requirement type="package" version="1.0.2">r-tidyr</requirement>
		<requirement type="package" version="0.6.1">r-xlsx</requirement>
		<requirement type="package" version="8.0.152">openjdk</requirement>
	</requirements>

	<command detect_errors="exit_code"><![CDATA[
		Rscript $__tool_directory__/gatkCNVannotate.R "${input}" "${gene_file}" "${read_counts}" "${segmentsDir}"
	]]></command>

	<inputs>
		<param name="input" type="data" format="vcf" label="CNV VCF"/>
		<param name="gene_file" type="data" format="gff" label="GFF Gene File"/>
		<param name="read_counts" type="data" format="tsv" label="Read Counts File"/>
		<param name="segmentsDir" type="text" label="Segments Diretory" help="Directory of segments files from previous cases" >
			<sanitizer>
			  <valid initial="string.ascii_letters,string.digits">
				<add value="/"/>
				<add value="_"/>
				<add value="-"/>
				<add value="."/>
				<add value="$"/>
			  </valid>
			</sanitizer>
		</param>
	</inputs>

	<outputs>
		<data format="xlsx" name="output" from_work_dir="excel_cnv_output.xlsx" label="${tool.name} on ${on_string}: Excel"/>
		<data format="tsv" name="tsv_output" from_work_dir="output_cnv.tsv" label="${tool.name} on ${on_string}: TSV"/>
	</outputs>

</tool>
